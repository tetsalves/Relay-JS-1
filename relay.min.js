(function(d,h,a){var i={alert:['<div class="relay_wrapper relay_alert {{ theme }}" id="relay_wrapper">','<form class="relay_container relay_form">','<div class="relay_content">','<p class="relay_header">{{ text }}</p>',"</div>",'<div class="relay_actions">','<button type="button" name="ok" class="relay_action_ok">{{ oktext }}</button>',"</div>","</form>","</div>"].join(""),prompt:['<div class="relay_wrapper relay_prompt {{ theme }}" id="relay_wrapper">','<form class="relay_container relay_form">','<div class="relay_content">','<p class="relay_header">{{ text }}</p>','<div class="relay_body">','<input type="{{ type }}" class="relay_textbox" name="answer">',"</div>","</div>",'<div class="relay_actions">','<button type="button" name="cancel" class="relay_action_cancel">{{ canceltext }}</button>','<button type="button" name="ok" class="relay_action_ok">{{ oktext }}</button>',"</div>","</form>","</div>"].join(""),confirm:['<div class="relay_wrapper relay_confirm {{ theme }}" id="relay_wrapper">','<form class="relay_container relay_form">','<div class="relay_content">','<p class="relay_header">{{ text }}</p>',"</div>",'<div class="relay_actions">','<button type="button" name="no">{{ notext }}</button>','<button type="button" name="yes" class="relay_action_ok">{{ yestext }}</button>',"</div>","</div>","</div>"].join("")};var j=function(){};var c={content:"",theme:"default",type:"text",ok:j,oktext:"Ok",cancel:j,canceltext:"Cancel",yes:j,yestext:"Yes",no:j,notext:"No",watch:{}};d(".relay_container button").live("click.relay",function(l){e(d(this));return false}).live("keydown.relay",function(l){if(d(this).hasClass("relay_focus")){switch(l.keyCode){case 13:e(d(this));return false;break}}}).live("focusin.relay",function(l){d(this).addClass("relay_focus")}).live("focusout.relay",function(l){d(this).removeClass("relay_focus")});d(".relay_form").live("submit",function(l){e(d(this).find(".relay_action_ok"));return false});function e(m){var l=m.attr("name");var p=m.data("relay:settings");var r=m.parents(".relay_wrapper").first();var o="";var n=true;var q=null;if(r.find(".relay_textbox").length){o=r.find(".relay_textbox").val();if(p.watch&&typeof p.watch[o]==="function"){q=p.watch[o].call(m,o);n=false}}if(n===true){if(typeof p[l]==="function"){p[l].call(m,o)}if(!q||!q instanceof k){m.parents(".relay_wrapper").fadeOut(200,function(){d(this).remove()})}}}function b(n,o){var q=d(n);var p=q.find("button");var m=q.find(".relay_action_ok");var l=q.find(".relay_textbox");p.data("relay:settings",o);if(d("#relay_wrapper").length){d("#relay_wrapper").remove()}d("body").append(q);q.show();g(q);q.hide();q.show();l.length?l.focus():m.focus()}function g(p){var p=p.find(".relay_container"),n=d(h).width(),m=d(h).height();var o=(n/2)-p.outerWidth()/2;var l=(m/2)-p.outerHeight()/2;p.css({left:o+"px"})}function f(n,m){var l=n;for(var p in m){l=l.replace("{{ "+p+" }}",m[p].length?m[p]:c[p])}return l}var k=function(n,m){this.init=false;if(this.init){return this}var l="";if(!n||!m){return false}m=d.extend({},c,m);m.theme="relay_theme_"+m.theme;switch(typeof n){case"string":l=f(i[n],m);b(l,m);break;default:break}this.init=true;return this};k.prototype={constructor:k};h.Relay=k})(jQuery,window);