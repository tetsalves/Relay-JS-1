(function(f,j,c){var n=function(){};var g=[];var e={text:"",oktext:"Ok",yestext:"Yes",notext:"No",canceltext:"Cancel",show:n,yes:n,no:n,ok:n,cancel:n,close:n};var l=[];var b=false;var d={input:"relay:input",show:"relay:show",yes:"relay:yes",no:"relay:no",ok:"relay:ok",cancel:"relay:cancel",close:"relay:close"};var k=[d.input,d.show,d.yes,d.no,d.ok,d.cancel,d.close].join(" ").replace(/_/g,":");var a={alert:['<div class="relay_wrapper relay_alert relay_theme_nes" id="relay_wrapper">','<form class="relay_container relay_form">','<div class="relay_content">','<p class="relay_header">{{ text }}</p>',"</div>",'<div class="relay_actions">','<button type="button" name="ok" class="relay_action_ok" tabindex="1">{{ oktext }}</button>',"</div>","</form>","</div>"].join(""),prompt:['<div class="relay_wrapper relay_prompt {{ theme }}" id="relay_wrapper">','<form class="relay_container relay_form">','<div class="relay_content">','<p class="relay_header">{{ text }}</p>','<div class="relay_body">','<input type="{{ type }}" class="relay_textbox" name="answer" tabindex="1">',"</div>","</div>",'<div class="relay_actions">','<button type="button" name="cancel" class="relay_action_cancel" tabindex="1">{{ canceltext }}</button>','<button type="button" name="ok" class="relay_action_ok" tabindex="1">{{ oktext }}</button>',"</div>","</form>","</div>"].join(""),confirm:['<div class="relay_wrapper relay_confirm {{ theme }}" id="relay_wrapper">','<form class="relay_container relay_form">','<div class="relay_content">','<p class="relay_header">{{ text }}</p>',"</div>",'<div class="relay_actions">','<button type="button" name="no" tabindex="1">{{ notext }}</button>','<button type="button" name="yes" class="relay_action_ok" tabindex="1">{{ yestext }}</button>',"</div>","</div>","</div>"].join("")};function h(s){var u=s.find(".relay_container"),r=f(j).width(),q=f(j).height();var t=(r/2)-u.outerWidth()/2;var p=(q/2)-u.outerHeight()/2;u.css({left:t+"px"})}function m(r,p){var q=p.settings;switch(r.type){case d.show:q.show.call(p);break;case d.ok:q.ok.call(p);break;case d.close:q.close.call(p);break;case d.yes:q.yes.call(p);break;case d.no:q.no.call(p);break;case d.cancel:q.cancel.call(p);break}return p}function i(s,p){var r=s.template;for(var q in p){if(p.hasOwnProperty(q)){r=r.replace("{{ "+q+" }}",p[q])}}s.$Relay=f(r);s.$Relay.delegate("button","click",function(u){var t=f(this).attr("name");s[t]();return false});return s}var o=function(r,q){if(!r&&!a[r]){return"You must supply a valid type to Relay."}var p=this;p.type=r||"alert";p.$Receiver=f("<b/>");p.settings=f.extend({},e,q);p._setTemplate(p.type)._attachEvents();i(p,p.settings);return p};o.fn=o.prototype={el:null,_attachEvents:function(){this.$Receiver.bind(k,m);return this},_setTemplate:function(p){this.template=a[p];return this},show:function(){this.$Relay.appendTo("body").hide().fadeIn(200);this.$Receiver.trigger(d.show,[this]);h(this.$Relay);return this},ok:function(){this.close();this.$Receiver.trigger(d.ok,[this]);return this},cancel:function(){this.close();this.$Receiver.trigger(d.cancel,[this]);return this},yes:function(){this.close();this.$Receiver.trigger(d.yes,[this]);return this},no:function(){this.close();this.$Receiver.trigger(d.no,[this]);return this},close:function(){this.$Relay.fadeOut(200,function(){f(this).detach()});this.$Receiver.trigger(d.close,[this]);return this}};j.Relay=o})(jQuery,window);