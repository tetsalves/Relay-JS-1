<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>

  <title>Relay.js</title>
  <link rel="stylesheet" href="relay.css" type="text/css">
  <script src="jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="relay.js" type="text/javascript" charset="utf-8"></script>
  <script type="text/javascript">
    $(function () {
      $('.alert').live('click', function (e) {
        new Relay('confirm', {
          text: 'Test alert chains.',
          theme: 'nes',
          chain: [
            {
              yes: function() {
                this.set({
                  text: 'You have clicked yes once.'
                });
              },
              no: function() {
                this.set({
                  text: 'Seriously?'
                });
              }
            },
            {
              yes: function() {
                this.set({
                  text: 'You have clicked yes twice.'
                });
              },
              no: function() {
                this.set({
                  text: 'Stop clicking no.'
                });
              }
            }
          ]
        });
        return false;
      });

      $('.confirm').live('click', function (e) {
        new Relay('confirm', {
          text : 'Please choose an option',
          theme : 'nes',
          yes : function () {
            this.set({
              text: 'Excellent choice.'
            });
          },
          no : function () {
            this.set({
              text: 'Poor choice.'
            });
          }
        });
        return false;
      });

      // Example of a (potentially neverending) dialog loop
      function _startMaze() {
        // Prompt the user to type 'foo'
        return new Relay('prompt', {
          text : 'Type foo:',
          theme : 'nes',

          // Set a watch for 'foo'
          watch : {
            'foo' : function (wrapper, value) {
              console.log(value);
            }
          }
        });
      }
      // You can chain Relays indefinitely
      $('.prompt').live('click', function (e) {
        // Prompt the user to type 'foo'
        _startMaze();
        return false;
      });
    });
  </script>
</head>

<a class="alert" href="#">Relay an alert</a>
<a class="confirm" href="#">Relay a confirmation</a>
<a class="prompt" href="#">Relay a prompter</a>

</body>
</html>
